diff --git a/jira_app.py b/jira_app.py
index 7dedf85..f656e0d 100644
--- a/jira_app.py
+++ b/jira_app.py
@@ -1,116 +1,105 @@
 from flask import Flask, render_template, request, redirect, url_for, session
-import requests
-from requests.auth import HTTPBasicAuth
-from utils.issue_lookup import get_issue_hierarchy, get_recent_worklogs, search_issue_by_filter, get_assignee_name, generate_pie_chart
-
-import sys
 import logging
-
-# Force Flask to log everything to stderr
-logging.basicConfig(stream=sys.stderr, level=logging.DEBUG)
-
+from utils.issue_lookup import get_issue_hierarchy, get_recent_worklogs, search_issue_by_filter
 
 app = Flask(__name__)
 app.secret_key = "ABC123!"
 
-@app.route('/')
-def home():
-    return render_template('login.html')
+logging.basicConfig(level=logging.DEBUG)
 
-@app.route('/login', methods=['POST'])
-def login():
-    session['jira_email'] = request.form['email']
-    session['jira_api_token'] = request.form['api_token']
-    session['jira_instance'] = "infosim.atlassian.net"
-    return redirect(url_for('search_issue'))
+@app.route("/")
+def home():
+    return render_template("login.html")
 
-@app.route('/search_issue', methods=['GET', 'POST'])
+@app.route("/search_issue", methods=["GET", "POST"])
 def search_issue():
-    if 'jira_email' not in session:
-        return redirect(url_for('home'))
-    
-    if request.method == 'POST':
-        filter_id = request.form.get('filter_id', '10456')
-        issue_key = search_issue_by_filter(filter_id, session['jira_email'], session['jira_api_token'], session['jira_instance'])
+    if "jira_email" not in session:
+        return redirect(url_for("home"))
+
+    if request.method == "POST":
+        filter_id = request.form.get("filter_id", "10456")
+        session["filter_id"] = filter_id
+        issue_key = search_issue_by_filter(filter_id, session["jira_email"], session["jira_api_token"], session["jira_instance"])
         if issue_key:
-            return redirect(url_for('fetch_issue', issue_key=issue_key))
+            return redirect(url_for("fetch_issue", issue_key=issue_key))
         else:
             return "No issues found for the given filter.", 404
-    
-    return render_template('search.html', filter_id='10456')
 
-@app.route('/fetch_issue', methods=['GET'])
+    return render_template("search.html", filter_id=session.get("filter_id", "10456"))
+
+@app.route("/fetch_issue", methods=["GET"])
 def fetch_issue():
-    if 'jira_email' not in session:
-        return redirect(url_for('home'))
-    
-    issue_key = request.args.get('issue_key')
+    if "jira_email" not in session:
+        return redirect(url_for("home"))
+
+    issue_key = request.args.get("issue_key")
+
     if not issue_key:
-        return redirect(url_for('search_issue'))
+        return redirect(url_for("search_issue"))
 
-    issues_info = get_issue_hierarchy(issue_key, session['jira_email'], session['jira_api_token'], session['jira_instance'])
-    if not issues_info or issues_info[0] is None:
-        return "Error: Issue data could not be retrieved.", 500
+    logging.debug(f"Fetching issue: {issue_key}")
 
-    assignee_data = issues_info[0].get('assignee', {})
-    print(f"DEBUG: Raw Assignee Data -> {assignee_data}", file=sys.stderr)
-    sys.stderr.flush()
+    issues_info = get_issue_hierarchy(issue_key, session["jira_email"], session["jira_api_token"], session["jira_instance"])
+    
+    if not issues_info:
+        return "Issue not found or unauthorized access.", 404
 
-    assignee_id = assignee_data if isinstance(assignee_data, str) else assignee_data.get('accountId', None)
-    assignee_name = get_assignee_name(assignee_id, session['jira_email'], session['jira_api_token'], session['jira_instance'])
-    print(f"DEBUG: Assignee Name -> {assignee_name}", file=sys.stderr)
-    sys.stderr.flush()
+    assignee_id = issues_info[0].get("assignee_id")  # FIXED
+    assignee_name = issues_info[0].get("assignee_name", "Unassigned")
+    task_time_spent = issues_info[0].get("timespent", 0)
 
-    worklog_issues, time_spent_by_project = get_recent_worklogs(
-        assignee_id, session['jira_email'], session['jira_api_token'], session['jira_instance']
-    ) if assignee_id else ([], {})
+    logging.debug(f"Assignee ID: {assignee_id}, Assignee Name: {assignee_name}")
 
-    task_time_spent = time_spent_by_project.get(issues_info[0].get("research_project"), 0.0)
+    worklog_issues, worklog_data = get_recent_worklogs(
+        assignee_id, session["jira_email"], session["jira_api_token"], session["jira_instance"]
+    ) if assignee_id else ([], {})
 
-    sorted_projects = sorted(time_spent_by_project.items(), key=lambda x: x[1], reverse=True)
-    pie_chart = generate_pie_chart(time_spent_by_project) if time_spent_by_project else None
+    sorted_projects = sorted(worklog_data.items(), key=lambda x: x[1], reverse=True)
 
     return render_template(
-        'issues.html',
+        "issues.html",
         issues=issues_info,
-        worklog_issues=worklog_issues,
-        pie_chart=pie_chart,
         assignee_name=assignee_name,
+        task_time_spent=task_time_spent,
+        worklog_issues=worklog_issues,
         sorted_projects=sorted_projects,
-        task_time_spent=task_time_spent
     )
 
-@app.route('/update_issue', methods=['POST'])
+@app.route("/update_issue", methods=["POST"])
 def update_issue():
-    data = request.get_json()
-    issue_key = data.get('issue_key')
-    research_project = data.get('research_project')
-    chargeable = data.get('chargeable')
-    
-    url = f"https://{session['jira_instance']}/rest/api/3/issue/{issue_key}"
-    auth = HTTPBasicAuth(session['jira_email'], session['jira_api_token'])
-    headers = {
-        "Accept": "application/json",
-        "Content-Type": "application/json"
-    }
-    payload = {
+    data = request.json
+    issue_key = data.get("issue_key")
+    research_project = data.get("research_project")
+    chargeable = data.get("chargeable")
+
+    if not issue_key or not research_project:
+        return {"message": "Missing required fields."}, 400
+
+    logging.debug(f"Updating Issue {issue_key}: Research Project -> {research_project}, Chargeable -> {chargeable}")
+
+    update_data = {
         "fields": {
-            "customfield_10097": research_project,
-            "customfield_10098": chargeable
+            "customfield_10097": {"value": research_project},
+            "customfield_10098": {"value": chargeable}
         }
     }
-    
-    response = requests.put(url, json=payload, headers=headers, auth=auth)
-    
+
+    url = f"https://{session['jira_instance']}/rest/api/3/issue/{issue_key}"
+    auth = (session["jira_email"], session["jira_api_token"])
+    headers = {"Accept": "application/json", "Content-Type": "application/json"}
+
+    response = requests.put(url, json=update_data, auth=auth, headers=headers)
+
     if response.status_code == 204:
-        return {"message": "Issue updated successfully", "redirect": url_for('search_issue')}
+        return {"message": "Issue updated successfully."}, 200
     else:
-        return {"message": "Failed to update issue"}, response.status_code
+        logging.error(f"Failed to update issue {issue_key}. Response: {response.text}")
+        return {"message": "Failed to update issue."}, 500
 
-if __name__ == '__main__':
+if __name__ == "__main__":
     app.run(
-        host="0.0.0.0",  
+        host="0.0.0.0",
         port=5000,
         ssl_context=("localhost.pem", "localhost-key.pem"),
         debug=True
-    )
\ No newline at end of file
+    )
diff --git a/utils/issue_lookup.py b/utils/issue_lookup.py
index 54db3c8..0baee7e 100644
--- a/utils/issue_lookup.py
+++ b/utils/issue_lookup.py
@@ -36,44 +36,52 @@ def get_issue_links(issue_data):
     
     return issue_links
 
-
 def get_recent_worklogs(assignee_id, email, api_token, jira_instance):
-    """Fetch all worklogs of the given assignee from the last 14 days and retrieve issue details."""
-    headers = {"Accept": "application/json"}
+    """
+    Fetches all worklogs for a given assignee in the last 14 days.
+    """
+    if not assignee_id:
+        logging.warning("No valid assignee ID found, skipping worklog lookup.")
+        return [], {}
+
+    logging.debug(f"Fetching worklogs for Assignee ID: {assignee_id}")
+
+    # JQL Query: Find all worklogs by this assignee in the last 14 days
+    jql_query = f"worklogAuthor = {assignee_id} AND worklogDate >= -14d"
+    url = f"https://{jira_instance}/rest/api/3/search?jql={jql_query}&fields=summary,worklog,{CUSTOM_FIELD_ID}"
+
     auth = HTTPBasicAuth(email, api_token)
-    
-    start_date = (datetime.utcnow() - timedelta(days=14)).strftime("%Y-%m-%d")
-    jql_query = f"worklogAuthor = {assignee_id} AND worklogDate >= {start_date}"
-    search_url = f"https://{jira_instance}/rest/api/3/search"
-    payload = {"jql": jql_query, "fields": ["key", "summary", CUSTOM_FIELD_ID, "worklog"]}
-    
-    response = requests.post(search_url, headers=headers, auth=auth, json=payload)
-    
+    headers = {"Accept": "application/json"}
+
+    response = requests.get(url, headers=headers, auth=auth)
+
+    worklog_data = {}
     worklog_issues = []
-    time_spent_by_project = defaultdict(int)
-    
+
     if response.status_code == 200:
-        issues = response.json().get('issues', [])
+        issues = response.json().get("issues", [])
+
         for issue in issues:
-            research_project_field = issue['fields'].get(CUSTOM_FIELD_ID)
-            research_project = research_project_field.get('value') if isinstance(research_project_field, dict) else 'N/A'
-            
-            total_time_spent = 0
-            worklogs = issue['fields'].get('worklog', {}).get('worklogs', [])
-            for worklog in worklogs:
-                if worklog['author']['accountId'] == assignee_id:
-                    total_time_spent += worklog['timeSpentSeconds'] / 3600  # Convert seconds to hours
-            
-            time_spent_by_project[research_project] += total_time_spent
-            
+            issue_key = issue.get("key", "Unknown Issue")
+            project = issue.get("fields", {}).get(CUSTOM_FIELD_ID, "Unknown Project")
+            worklogs = issue.get("fields", {}).get("worklog", {}).get("worklogs", [])
+
+            total_time_spent = sum(wl.get("timeSpentSeconds", 0) / 3600 for wl in worklogs)
+            worklog_data[project] = worklog_data.get(project, 0) + total_time_spent
+
             worklog_issues.append({
-                'key': issue['key'],
-                'name': issue['fields']['summary'],
-                'research_project': research_project,
-                'time_spent_hours': total_time_spent
+                "key": issue_key,
+                "name": issue.get("fields", {}).get("summary", "No Title"),
+                "research_project": project,
+                "time_spent_hours": round(total_time_spent, 2)
             })
-    
-    return worklog_issues, time_spent_by_project
+
+        logging.debug(f"Worklogs Retrieved: {worklog_data}")
+
+    else:
+        logging.error(f"Failed to fetch worklogs, Status Code: {response.status_code}")
+
+    return worklog_issues, worklog_data
 
 
 def generate_pie_chart(time_spent_by_project):
@@ -136,15 +144,17 @@ def get_issue_hierarchy(issue_key, email, api_token, jira_instance):
         
         issue_data = response.json()
         
-        # Extract fields
+        # Extract issue fields
         issue_name = issue_data['fields'].get('summary', 'No Title')
         raw_description = issue_data['fields'].get('description', {})
         issue_description = extract_plain_text_from_description(raw_description)
-        logging.debug(f"Issue {current_issue_key} Description -> {issue_description[:100]}...")  # Safe preview
 
         assignee_data = issue_data['fields'].get('assignee')
-        assignee = assignee_data['displayName'] if assignee_data else 'Unassigned'
-        logging.debug(f"Issue {current_issue_key} Assignee -> {assignee}")
+        assignee_name = assignee_data.get('displayName', 'Unassigned') if assignee_data else 'Unassigned'
+        assignee_id = assignee_data.get('accountId', None) if assignee_data else None  # FIXED
+
+        logging.debug(f"Issue {current_issue_key} Assignee Name -> {assignee_name}")
+        logging.debug(f"Issue {current_issue_key} Assignee ID -> {assignee_id}")
 
         worklogs = issue_data['fields'].get('worklog', {}).get('worklogs', [])
         issue_timespent = sum(wl.get("timeSpentSeconds", 0) / 3600 for wl in worklogs)
@@ -157,8 +167,9 @@ def get_issue_hierarchy(issue_key, email, api_token, jira_instance):
         issues.append({
             'key': current_issue_key,
             'name': issue_name,
-            'description': issue_description,  # Now only plain text
-            'assignee': assignee,
+            'description': issue_description,
+            'assignee_name': assignee_name,  # FIXED
+            'assignee_id': assignee_id,  # FIXED
             'timespent': round(issue_timespent, 2),
             'research_project': research_project,
             'link_type': link_type
